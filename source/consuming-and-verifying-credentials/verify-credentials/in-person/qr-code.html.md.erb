---
title: GOV.UK Wallet QR codes for in person flows
weight: 1
last_reviewed_on: 2026-02-04
review_in: 6 months
---

# GOV.UK Wallet QR codes for in person flows

GOV.UK will allow you to verify attributes from credentials, if a user consents to share them with you.  You can use the shared attributes in your verification process.  When a user agrees to share their credential in person this is known as a proximity flow.

Using in person verification you will be able to programmatically confirm information held in a credential, without revealing unnecessary details about the user. 

Before you begin your verification process, you must establish a connection with the device holding the credential. This is known as device engagement.

To establish a connection successfully you must be able to:

- read an [ISO/IEC 18004](https://www.iso.org/standard/83389.html) standard [QR code](#qr-code)
- act in the [client role, using the Bluetooth GATT protocol](./data-retrieval)
- support Curve P-256 for ECDH/ECDSA session encryption

More details of the in-person sharing flow are [available](./#understand-gov-uk-wallet-s-in-person-sharing-flow).

## Device data shared in a GOV.UK Wallet QR code

GOV.UK Wallet will use a QR code to begin device engagement, using the [ISO/IEC 18013-5](https://www.iso.org/obp/ui/en/#iso:std:iso-iec:18013:-5:ed-1:v1:en) standard. The use of QR codes is well established, and available across a wide range of devices. GOV.UK Wallet will not currently use other device engagement technologies, such as Near Field Communication (NFC).  

When prompted by a user to share a credential, GOV.UK Wallet will generate the QR code for you to read.  The QR code contains GOV.UK Wallet's [device engagement structure](#device-engagement-structure).

### Personally identifiable information

The QR code will allow you to request a secure connection to the user's device.  You will use this connection to request credential attributes you wish to use in your verification process.  

The QR code does not contain any personally identifiable information about the user.

### Device engagement structure

GOV.UK Wallet will share the `DeviceEngagement` structure of a credential when you read the generated QR code, in the form of a Concise Binary Object Representation (CBOR).  This CBOR will give you the information you need to configure the data sharing flow. 

The GOV.UK Wallet `DeviceEngagement` structure will contain:

| Element                                  | Description                                                                      | Data type           | 
|------------------------------------------|----------------------------------------------------------------------------------|---------------------|
| `Version`                                | The version of the `DeviceEngagement` structure.  Set to `"1.0"`.                | `str`               |
| `Security`                               | Array containing [encryption and public key information](#security).             | `[int, bstr]`       | 
| `DeviceRetrievalMethod`                  | Array describing supported [options for data sharing](#device-retrieval-method). | `[uint, uint, map]` | 
| `DeviceRetrievalMethod.RetrievalOptions` | Map describing [supported mdoc modes and identifiers](#retrieval-options).       | `{bool,bool,bstr}`  | 
  
There is a [complete CBOR example](#example-device-engagement-structure) available.                                         

#### Security

```
├── 1 : Security
│   ├── int: Cipher Suite ID       
│   └── EDeviceKeyBytes : #6.24(bstr .cbor EDeviceKey)
```

#### Device retrieval method

You can use the `DeviceRetrievalMethod` element to find details about the connection methods GOV.UK Wallet has available. Initially GOV.UK Wallet will only support BLE connections.  

GOV.UK Wallet will set this value to `2` to indicate BLE support, for example:

```
── ? 2 : [DeviceRetrievalMethod]+
│   └── DeviceRetrievalMethod
│       ├── uint: 2  # Sharing type (BLE)
```

GOV.UK Wallet will specify the `Version` of the `DeviceRetrievalMethod` structure, this value will be set to `1`.  The `DeviceRetrievalMethod` will also contain a CBOR map of [`RetrievalOptions`](#retrieval-options).  

This is an example `DeviceRetrievalMethod` CBOR:

```
── ? 2 : [DeviceRetrievalMethod]+
│   └── DeviceRetrievalMethod
│       ├── uint: 2  # Sharing type (BLE)
│       ├── uint: 1 
│       └── RetrievalOptions 
│           ├──{RETRIVAL_OPTIONS}   
```

#### Retrieval options

When device engagement begins, GOV.UK Wallet will take the peripheral role and wait for you to connect. GOV.UK Wallet will enable this setting in the `RetrievalOptions`, as well as disabling client mode.  GOV.UK will also provide a randomly generated UUID for the sharing session. 

For example:

```
── ? 2 : [DeviceRetrievalMethod]+
│   └── DeviceRetrievalMethod
│       ├── uint: 2  # Sharing type (BLE)
│       ├── uint: 1 
│       └── RetrievalOptions 
│           ├── 0 : true # enable mdoc peripheral mode   
│           ├── 1 : false # disable mdoc client mode       
│           ├── ? 10 : h'11111111222233334444555555555555' #uuid for mdoc peripheral mode session         
```

#### Example device engagement structure

Below is an example of a `DeviceEngagement` structure, containing all the elements you will be able to use:

```
DeviceEngagement
├── 0 : Version                   
├── 1 : Security
│   ├── int: Cipher Suite ID       
│   └── EDeviceKeyBytes : #6.24(bstr .cbor EDeviceKey)
├── ? 2 : [DeviceRetrievalMethod]+
│   └── DeviceRetrievalMethod
│       ├── uint: Type             ; we will only support type 2 (BLE)
│       ├── uint: Version          ; hardcoded to 1
│       └── RetrievalOptions       ; hardcoded to 1
│           ├── 0 : bool            ; support for mdoc peripheral mode   
│           ├── 1 : bool            ; support for mdoc client mode       
│           ├── ? 10 : bstr         ; uuid for mdoc peripheral mode      

```

Below is an example of the `DeviceEngagement` structure as a CBOR diagnostic:

```
{
    0: "1.0",
    1: [
        1, 
        24(h'A420010102215820FF7E64F1...')
    ], 
    2: [
        [
            2,
            1, 
            {
                0: true,
                1: false,
                10: h'912f3084-f573-48a3-9bf3-e392262e6a52'
            }
        ]
    ]
```

### QR code URL

When you read a QR code generated by GOV.UK Wallet, you will receive the base64 URL encoded CBOR [`DeviceEngagement` structure](#device-engagement-structure).  This will be in the format of `mdoc:{URL_ENCODED_CBOR}`.

This is an example of a QR code URL:

```
mdoc:owBjMS4wAYIB2BhYS6QgAQECIVgg_35k8YsDUueJExqcPh8UHXaWbJDq5EX4Y5sflISm3ogiWCA8_LpuqlBD3CNI3PIev_rImaLIchXJbEy3D07Zus_pOwKBgwIBowD1AfQKUBEREREiIjMzRERVVVVVVVU
```